<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            background-color: #323232;
            color: #ffffff;
            font-family: system-ui, sans-serif;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            background-color: #282828;
            /* border-bottom: 1px solid #1a1a1a; */
        }

        .tab-button {
            flex: 1;
            background-color: transparent;
            color: #aaa;
            border: none;
            padding: 12px 16px;
            cursor: pointer;
            font-size: 14px;
            /* border-bottom: 2px solid transparent; */
            transition: all 0.2s;
        }

        .tab-button:hover {
            background-color: #3a3a3a;
            color: #fff;
        }

        .tab-button.active {
            background-color: #323232;
            color: #fff;
            border-bottom-color: #0265DC;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            flex-direction: column;
            gap: 12px;
            padding: 12px;
            overflow-y: auto;
            overflow-x: hidden;
            flex: 1;
            will-change: auto;
        }

        .tab-content.active {
            display: flex;
        }

        /* Settings Tab Styles */
        .settings-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .settings-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* è‡ªå®šä¹‰ä¸‹æ‹‰é€‰æ‹©å™¨æ ·å¼ */
        .custom-select-button {
            width: 100%;
            background-color: #1e1e1e;
            color: #fff;
            border: 1px solid #4a4a4a;
            padding: 10px 12px;
            border-radius: 3px;
            font-size: 11px;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 36px;
            box-sizing: border-box;
        }

        .custom-select-button:hover {
            background-color: #2a2a2a;
            border-color: #5a5a5a;
        }

        .custom-select-button:focus {
            outline: none;
            border-color: #0265DC;
        }

        .custom-select-arrow {
            width: 0;
            height: 0;
            border-left: 4px solid transparent;
            border-right: 4px solid transparent;
            border-top: 5px solid #fff;
            margin-left: 8px;
        }

        /* ä¸‹æ‹‰é€‰é¡¹å¼¹çª— */
        .select-dialog {
            background-color: #323232;
            border: 1px solid #4a4a4a;
            border-radius: 6px;
            padding: 0;
            min-width: 300px;
            max-width: 400px;
        }

        .select-dialog-header {
            padding: 12px 16px;
            border-bottom: 1px solid #4a4a4a;
            font-size: 13px;
            font-weight: 500;
        }

        .select-dialog-list {
            max-height: 300px;
            overflow-y: auto;
            padding: 8px 0;
        }

        .select-option {
            width: 100%;
            background-color: transparent;
            color: #fff;
            border: none;
            padding: 12px 16px;
            text-align: left;
            cursor: pointer;
            font-size: 11px;
            line-height: 1.6;
            transition: background-color 0.15s;
        }

        .select-option:hover {
            background-color: #3a3a3a;
        }

        .select-option.selected {
            background-color: #0265DC;
            color: #fff;
        }

        .select-option.selected:hover {
            background-color: #0056b3;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        .select-dialog-list::-webkit-scrollbar {
            width: 8px;
        }

        .select-dialog-list::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        .select-dialog-list::-webkit-scrollbar-thumb {
            background: #4a4a4a;
            border-radius: 4px;
        }

        .select-dialog-list::-webkit-scrollbar-thumb:hover {
            background: #5a5a5a;
        }

        /* Preset æŒ‰é’®è¡Œæ ·å¼ - ç‹¬ç«‹ä¸€è¡Œ */
        .preset-buttons {
            display: flex;
            gap: 6px;
            margin-top: 6px;
        }

        label {
            font-size: 13px;
            color: #ccc;
            margin-left: 6px;
            margin-bottom: 4px;
            display: block;
        }

        select,
        input,
        textarea {
            background-color: #1e1e1e;
            color: #fff;
            border: 1px solid #3a3a3a;
            padding: 0px;
            margin: 5px;
            border-radius: 3px;
            font-size: 11px;
            font-family: system-ui, sans-serif;
            width: 100%;
            box-sizing: border-box;
            line-height: 1.6;
        }

        select,
        input {
            height: 36px;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            line-height: 1.4;
        }

        /* åˆ†è¾¨ç‡æŒ‰é’®ç»„æ ·å¼ */
        .resolution-buttons {
            display: flex;
            gap: 6px;
        }

        .resolution-buttons button {
            flex: 1;
            padding: 6px 12px;
            font-size: 12px;
            background-color: #2a2a2a;
            border: 1px solid #3a3a3a;
            transition: all 0.2s;
        }

        .resolution-buttons button:hover {
            background-color: #3a3a3a;
            border-color: #4a4a4a;
        }

        .resolution-buttons button.active {
            background-color: #0265DC;
            border-color: #0265DC;
        }

        .resolution-buttons button.active:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .resolution-buttons button:not(.active) {
            opacity: 0.5;
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ffffff' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 32px;
            padding-top: 12px;
            padding-bottom: 12px;
        }

        /* ä¸‹æ‹‰èœå•é€‰é¡¹æ ·å¼ */
        select option {
            padding: 10px 12px;
            line-height: 2;
            font-size: 11px;
            min-height: 32px;
        }

        select:focus,
        input:focus,
        textarea:focus {
            outline: none;
            /* border-color: #0265DC; */
        }

        input[type="password"] {
            font-family: monospace;
        }

        .button-group {
            display: flex;
            gap: 6px;
        }

        button {
            background-color: #0265DC;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 13px;
            white-space: nowrap;
        }

        button:hover {
            background-color: #0056b3;
        }

        button.small {
            padding: 4px 8px;
            font-size: 12px;
        }

        button.danger {
            background-color: #c83232;
        }

        button.danger:hover {
            background-color: #a02828;
        }

        button.secondary {
            background-color: #5a5a5a;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        button:disabled:hover {
            background-color: #383838;
        }

        button.secondary:disabled:hover {
            background-color: #5a5a5a;
        }

        .flex-grow {
            flex: 1;
        }

        hr {
            border: none;
            border-top: 1px solid #4a4a4a;
            margin: 8px 0;
        }

        .status-message {
            font-size: 12px;
            padding: 6px 8px;
            border-radius: 3px;
            margin-top: 4px;
            min-height: 24px;
        }

        .status-success {
            background-color: #2d5016;
            color: #a5d68b;
        }

        .status-error {
            background-color: #5c1616;
            color: #f0a0a0;
        }
    </style>
</head>

<body>
    <!-- Tab Navigation -->
    <div class="tab-nav">
        <button class="tab-button active" data-tab="generate">Generate</button>
        <button class="tab-button" data-tab="utilities">Utilities</button>
        <button class="tab-button" data-tab="settings">Settings</button>
    </div>

    <!-- Generate Tab -->
    <div class="tab-content active" id="generateTab">
        <h1 style="margin: 0;">PS Banana</h1>

        <!-- Prompt Presets -->
        <div class="settings-section">
            <label>Prompt Presets:</label>
            <select id="presetSelect"></select>
            <div class="preset-buttons">
                <button id="btnAddPreset" class="small" title="Add Preset">+</button>
                <button id="btnSavePreset" class="small" title="Save Preset">Save</button>
                <button id="btnRenamePreset" class="small" title="Rename Preset">Rename</button>
                <button id="btnDeletePreset" class="small danger" title="Delete Preset">Del</button>
            </div>
        </div>

        <!-- Prompt Input -->
        <div class="settings-section">
            <label>Prompt:</label>
            <textarea witch="500" id="promptInput" rows="6" placeholder="Enter your image generation prompt..."></textarea>
        </div>

        <!-- Generation Mode -->
        <div class="settings-section">
            <label>Generation Mode:</label>
            <div class="resolution-buttons">
                <button id="btnModeText2Img" class="active" data-mode="text2img">Text to Image</button>
                <button id="btnModeImgEdit" data-mode="imgedit">Image Edit</button>
            </div>
        </div>

        <!-- Resolution -->
        <div class="settings-section">
            <label>Resolution:</label>
            <div class="resolution-buttons">
                <button id="btnRes1K" class="active" data-resolution="1K">1K</button>
                <button id="btnRes2K" data-resolution="2K">2K</button>
                <button id="btnRes4K" data-resolution="4K">4K</button>
            </div>
        </div>

        <!-- Generate Button -->
        <button id="btnGenerate" style="padding: 10px 16px; font-size: 14px; font-weight: 500;">Generate Image</button>
        <button id="btnTestExport" class="secondary" style="margin-top: 4px;">Test Export (æµ‹è¯•å¯¼å‡º)</button>
        <button id="btnTestImport" class="secondary" style="margin-top: 4px;">Test Import (æœ€è¿‘çš„å›¾)</button>

        <!-- Status Display -->
        <div id="generateStatus"></div>
    </div>

    <!-- Utilities Tab -->
    <div class="tab-content" id="utilitiesTab">
        <h2 style="margin: 0 0 16px 0; font-size: 16px;">å®ç”¨å·¥å…·</h2>

        <!-- Smart Canvas Ratio -->
        <div class="settings-section">
            <label>Smart Canvas Ratio (æ™ºèƒ½ç”»å¸ƒæ¯”ä¾‹):</label>
            <p style="font-size: 11px; color: #aaa; margin: 4px 0 12px 0;">
                æ ¹æ®å½“å‰ç”»å¸ƒå°ºå¯¸ï¼Œè‡ªåŠ¨è°ƒæ•´åˆ°æœ€æ¥è¿‘çš„æ ‡å‡†æ¯”ä¾‹ã€‚ä¸è£åˆ‡å†…å®¹ï¼Œä»…æ‰©å±•ç”»å¸ƒã€‚
            </p>
            <button id="btnSmartCanvasRatio" style="width: 100%;">åº”ç”¨ Smart Canvas Ratio</button>
            <div id="canvasRatioStatus" class="status-message" style="margin-top: 8px;"></div>
        </div>

        <hr>

        <div class="settings-section">
            <label>æ”¯æŒçš„æ¯”ä¾‹:</label>
            <div style="font-size: 11px; color: #aaa; line-height: 1.6;">
                1:1, 2:3, 3:2, 3:4, 4:3, 4:5, 5:4, 9:16, 16:9, 21:9
            </div>
        </div>
    </div>

    <!-- Settings Tab -->
    <div class="tab-content" id="settingsTab">
        <div class="settings-section">
            <label>Provider:</label>
            <select id="providerSelect"></select>
            <div class="preset-buttons">
                <button id="btnAddProvider" class="small" title="Add New Provider">+</button>
                <button id="btnSaveProvider" class="small">Save</button>
                <button id="btnDeleteProvider" class="small danger">Del</button>
            </div>
        </div>

        <button id="btnTestConnection">Test Connection</button>
        <div id="connectionStatus"></div>

        <hr>

        <div class="settings-section">
            <label>API Key:</label>
            <input type="password" id="inputApiKey" placeholder="Enter API Key">

            <label>Base URL:</label>
            <input type="text" id="inputBaseUrl" placeholder="https://...">

            <label>Model ID:</label>
            <input type="text" id="inputModelId" placeholder="model-name">
        </div>

        <hr>

        <div class="settings-section">
            <label>Export Settings:</label>
            
            <label>Max Size (å¯¼å‡ºå›¾ç‰‡é•¿è¾¹æœ€å¤§é•¿åº¦):</label>
            <input type="number" id="inputMaxSize" placeholder="2048" min="512" max="8192" step="256">
            
            <label>Quality (WebPå‹ç¼©è´¨é‡ 0-100):</label>
            <input type="number" id="inputQuality" placeholder="80" min="0" max="100" step="1">
        </div>

        <hr>

        <div class="settings-section">
            <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="debugModeCheckbox" style="width: auto; margin-right: 8px;">
                <span>Debug Mode (ä¿å­˜è°ƒè¯•æ—¥å¿—)</span>
            </label>
            <div style="margin-top: 8px;">
                <label>ğŸ“ è°ƒè¯•æ–‡ä»¶ä¿å­˜åœ¨ï¼ˆå¯å¤åˆ¶ï¼‰ï¼š</label>
                <input type="text" id="debugFolderPath" 
                       style="font-size: 11px; color: #aaa;"
                       placeholder="å¯ç”¨ Debug Mode åæ˜¾ç¤ºè·¯å¾„">
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>

</html>